{% extends 'base.html' %}

{% block content %}
{% if user.is_authenticated %}
    <span>@{{ post.created_by.username }}</span>
    <br>
    <span>Topic: {{ post.topic }}</span>
    <br>
    <hr>
    <h1>{{ post.title }}</h1>
    <p>{{ post.content }}</p>
    <small>Posted on {{ post.created_at }}</small>
    <hr>
    <div class="comment-container">
        <form method="POST" action="">
            {% csrf_token %}
            <input type="text" name="content" placeholder="Add a comment...">
            <button type="submit">Submit</button>
        </form>
        {% for comment in post.comments.all %}
        <div style="border:1px solid #ccc; margin:10px; padding:10px; border-radius: 5px;">
            <span>@{{ comment.author.username }}</span><br>
            <hr><p>{{ comment.text }}</p><small>Posted on {{ comment.created_at }}</small><hr>
        </div><br>
        {%if user == comment.author %}
        <form method="POST" action="{% url 'delete_comment' comment.id %}">
            {% csrf_token %}
    
            <a href="{% url 'delete_comment' comment.id %}">Delete Comment</a>
        </form>

        {% endif %}
        {% endfor %}<br>
    </div>
{% endif %}
{% endblock %}

